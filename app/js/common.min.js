!function(){var e={apiKey:"AIzaSyDNWT7JhPXEMha3uCG7C7OPtUfDOdOTODY",authDomain:"photogallery-c5f4c.firebaseapp.com",databaseURL:"https://photogallery-c5f4c.firebaseio.com",projectId:"photogallery-c5f4c",storageBucket:"photogallery-c5f4c.appspot.com",messagingSenderId:"52787665772"};firebase.initializeApp(e);var a=angular.module("app",["ngRoute","ngFileUpload","firebase"]);a.config(function(e){e.when("/",{templateUrl:"partials/slider.html"}).when("/manage",{templateUrl:"partials/manage.html"}).when("/gallery",{templateUrl:"partials/gallery.html",controller:"GalleryCtrl"})}),a.controller("MainCtrl",["$scope","$firebaseStorage","$firebaseArray",function(e,a,l){var t=document.getElementById("uploader");e.tags={},e.displayMsg=!0,e.msg="No File selected. PLease select a file to upload.",e.selectFile=function(a){e.fileList=a,e.displayMsg=!1},e.removeFile=function(a){var l=e.fileList.indexOf(a);e.fileList.splice(l,1),e.fileList.length<1&&(e.displayMsg=!0)},e.uploadFile=function(o){var o=o,r=e.tags.name;void 0==r&&(r=null);var s=firebase.storage().ref("Photos/"+o.name),i=a(s),n=i.$put(o);n.$progress(function(a){var l=a.bytesTransferred/a.totalBytes*100;e.percentage=l.toFixed(0),console.log(e.percentage),t.style.width=e.percentage+"%"}),n.$complete(function(a){e.removeFile(o),e.msg="Photo uploaded Successdully. Select another image to upload";var t=a.downloadURL,s=a.metadata.name,i=firebase.database().ref("Images"),c=l(i);c.$add({imageUrl:t,imageName:s,tags:r}).then(function(e){var a=e.key;console.log("imadd"+a),c.$indexFor(a)}),n.$error(function(e){console.log(e)})})}}]),a.controller("GalleryCtrl",["$scope","$firebaseArray",function(e,a){var l=firebase.database().ref("Images"),t=a(l);e.urls=t}]),a.controller("ManageCtrl",["$scope","$firebaseArray","$firebaseStorage",function(e,a,l){var t=firebase.database().ref("Images"),o=a(t);e.urls=o,e.deleteFile=function(a){console.log(a);var t=firebase.storage().ref("Photos/"+a.imageName);l(t).$delete().then(function(){e.urls.$remove(a),console.log("deleted")}).catch(function(e){console.log(e.message)})}}])}();